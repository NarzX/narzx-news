<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NarzX News</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
--bg:#0f172a;
--card:#1e293b;
--text:#f8fafc;
--sub:#94a3b8;
--accent:#22c55e;
}
body{
margin:0;
font-family:'Inter',sans-serif;
background:var(--bg);
color:var(--text);
}
header{
display:flex;
justify-content:space-between;
align-items:center;
padding:16px 20px;
background:#111827;
position:sticky;
top:0;
}
.logo{
font-weight:700;
color:var(--accent);
font-size:18px;
}
.container{
max-width:1100px;
margin:auto;
padding:20px;
}
.search-box{
display:flex;
margin-bottom:30px;
}
.search-box input{
flex:1;
padding:12px;
border-radius:10px;
border:none;
background:var(--card);
color:var(--text);
}
h2{
margin:30px 0 15px;
font-size:20px;
}
.grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
gap:20px;
}
.card{
background:var(--card);
border-radius:14px;
overflow:hidden;
display:flex;
flex-direction:column;
transition:.25s;
}
.card:hover{
transform:translateY(-5px);
}
.card img{
width:100%;
height:170px;
object-fit:cover;
}
.card-content{
padding:15px;
display:flex;
flex-direction:column;
flex:1;
}
.card h3{
font-size:15px;
margin-bottom:8px;
}
.card p{
font-size:13px;
color:var(--sub);
flex:1;
}
.card a{
color:var(--accent);
text-decoration:none;
font-weight:600;
}
.pagination{
display:flex;
justify-content:center;
gap:12px;
margin-top:25px;
}
.pagination button{
background:var(--accent);
border:none;
padding:8px 14px;
border-radius:8px;
font-weight:600;
cursor:pointer;
}
.loading{
text-align:center;
margin:20px 0;
color:var(--sub);
}
</style>
</head>
<body>

<header>
<div class="logo">ðŸ“° NarzX News</div>
</header>

<div class="container">

<div class="search-box">
<input type="text" id="search" placeholder="Cari berita...">
</div>

<h2>ðŸ”¥ Trending</h2>
<div class="grid" id="trending"></div>

<h2>ðŸ“° Berita</h2>
<div class="grid" id="news"></div>

<div class="pagination">
<button onclick="prevPage()">Prev</button>
<span id="pageNum">1</span>
<button onclick="nextPage()">Next</button>
</div>

<div class="loading" id="loading"></div>

</div>

<script>
let currentPage = 1;
let currentQuery = "";
const pageSize = 6;

async function loadTrending(){
const res = await fetch("/api/news?page=1");
const data = await res.json();
displayNews(data.articles,"trending");
}

async function loadNews(){
document.getElementById("loading").innerText="Loading...";

const res = await fetch(`/api/news?q=${currentQuery}&page=${currentPage}`);
const data = await res.json();

document.getElementById("loading").innerText="";

if(!data.articles){
document.getElementById("news").innerHTML="<p>Gagal mengambil berita.</p>";
return;
}

displayNews(data.articles,"news");
document.getElementById("pageNum").innerText=currentPage;
}

function displayNews(articles,target){
const container=document.getElementById(target);
container.innerHTML="";

if(!articles || articles.length===0){
container.innerHTML="<p>Tidak ada berita.</p>";
return;
}

articles.forEach(article=>{
const card=document.createElement("div");
card.className="card";

card.innerHTML=`
<img src="${article.urlToImage || 'https://via.placeholder.com/400x200'}">
<div class="card-content">
<h3>${article.title}</h3>
<p>${article.description || ""}</p>
<a href="${article.url}" target="_blank">Baca selengkapnya</a>
</div>
`;
container.appendChild(card);
});
}

document.getElementById("search")
.addEventListener("input",function(e){
currentQuery = e.target.value.trim();
currentPage = 1;
loadNews();
});

function nextPage(){
currentPage++;
loadNews();
}

function prevPage(){
if(currentPage>1){
currentPage--;
loadNews();
}
}

loadTrending();
loadNews();
</script>

</body>
  </html>
